{"ast":null,"code":"import _classCallCheck from\"C:\\\\Users\\\\bb\\\\Desktop\\\\facerecognitionbrain\\\\facerec\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/classCallCheck\";import _createClass from\"C:\\\\Users\\\\bb\\\\Desktop\\\\facerecognitionbrain\\\\facerec\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/createClass\";import _inherits from\"C:\\\\Users\\\\bb\\\\Desktop\\\\facerecognitionbrain\\\\facerec\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/inherits\";import _createSuper from\"C:\\\\Users\\\\bb\\\\Desktop\\\\facerecognitionbrain\\\\facerec\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/createSuper\";import React,{Component,useCallback}from'react';import'./App.css';import Navigation from'./components/Navigation/Navigation';import Signin from'./components/Signin/Signin';import Register from'./components/Register/Register';import Logo from'./components/Logo/Logo';import ImageLinkForm from'./components/ImageLinkForm/ImageLinkForm';import Rank from'./components/Rank/Rank';import Particles from'react-particles-js';import FaceRecognition from'./components/FaceRecognition/FaceRecognition';var particlesOptions={particles:{number:30,density:{enable:true,value_area:800}}};var initialState={input:'',imageUrl:'',box:{},route:'signin',isSignedIn:false,user:{email:'',name:'',id:'',entries:0,joined:''}};var App=/*#__PURE__*/function(_Component){_inherits(App,_Component);var _super=_createSuper(App);function App(){var _this;_classCallCheck(this,App);_this=_super.call(this);_this.loadUser=function(data){_this.setState({user:{email:data.email,name:data.name,id:data.id,entries:data.entries,joined:data.joined}});};_this.calculateFaceLocation=function(data){var clarifaiFace=data.outputs[0].data.regions[0].region_info.bounding_box;var image=document.getElementById('inputimage');var width=Number(image.width);var height=Number(image.height);console.log(width,height);return{leftCol:clarifaiFace.left_col*width,topRow:clarifaiFace.top_row*height,rightCol:width-clarifaiFace.right_col*width,bottomRow:height-clarifaiFace.bottom_row*height};};_this.displayFaceBox=function(box){_this.setState({box:box});};_this.onInputChange=function(event){_this.setState({input:event.target.value});};_this.onButtonSubmit=function(){_this.setState({imageUrl:_this.state.input});fetch('http://localhost:3000/imageurl',{method:'post',headers:{'Content-Type':'application/json'},body:JSON.stringify({input:_this.state.input})}).then(function(response){return response.json();}).then(function(response){if(response){fetch('http://localhost:3000/image',{method:'put',headers:{'Content-Type':'application/json'},body:JSON.stringify({id:_this.state.user.id})}).then(function(response){return response.json();}).then(function(count){_this.setState(Object.assign(_this.state.user,{entries:count}));}).catch(console.log);}_this.displayFaceBox(_this.calculateFaceLocation(response));}).catch(function(err){return console.log(err);});};_this.onRouteChange=function(route){if(route==='signout'){_this.setState(initialState);}else if(route==='home'){_this.setState({isSignedIn:true});}_this.setState({route:route});};_this.state=initialState;return _this;}_createClass(App,[{key:\"render\",value:function render(){var _this$state=this.state,isSignedIn=_this$state.isSignedIn,route=_this$state.route,box=_this$state.box,imageUrl=_this$state.imageUrl;return/*#__PURE__*/React.createElement(\"div\",{className:\"App\"},/*#__PURE__*/React.createElement(Particles,{className:\"particles\",params:particlesOptions}),/*#__PURE__*/React.createElement(Navigation,{isSignedIn:isSignedIn,onRouteChange:this.onRouteChange}),route==='home'?/*#__PURE__*/React.createElement(\"div\",null,/*#__PURE__*/React.createElement(Logo,null),/*#__PURE__*/React.createElement(Rank,{name:this.state.user.name,entries:this.state.user.entries}),/*#__PURE__*/React.createElement(ImageLinkForm,{onInputChange:this.onInputChange,onButtonSubmit:this.onButtonSubmit}),/*#__PURE__*/React.createElement(FaceRecognition,{box:box,imageUrl:imageUrl})):route==='signin'?/*#__PURE__*/React.createElement(Signin,{loadUser:this.loadUser,onRouteChange:this.onRouteChange}):/*#__PURE__*/React.createElement(Register,{loadUser:this.loadUser,onRouteChange:this.onRouteChange}));}}]);return App;}(Component);export default App;","map":{"version":3,"sources":["C:/Users/bb/Desktop/facerecognitionbrain/facerec/src/App.js"],"names":["React","Component","useCallback","Navigation","Signin","Register","Logo","ImageLinkForm","Rank","Particles","FaceRecognition","particlesOptions","particles","number","density","enable","value_area","initialState","input","imageUrl","box","route","isSignedIn","user","email","name","id","entries","joined","App","loadUser","data","setState","calculateFaceLocation","clarifaiFace","outputs","regions","region_info","bounding_box","image","document","getElementById","width","Number","height","console","log","leftCol","left_col","topRow","top_row","rightCol","right_col","bottomRow","bottom_row","displayFaceBox","onInputChange","event","target","value","onButtonSubmit","state","fetch","method","headers","body","JSON","stringify","then","response","json","count","Object","assign","catch","err","onRouteChange"],"mappings":"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","sourcesContent":["import React, { Component, useCallback } from 'react';\nimport './App.css';\nimport Navigation from './components/Navigation/Navigation';\nimport Signin from './components/Signin/Signin';\nimport Register from './components/Register/Register';\nimport Logo from './components/Logo/Logo';\nimport ImageLinkForm from './components/ImageLinkForm/ImageLinkForm';\nimport Rank from './components/Rank/Rank';\nimport Particles from 'react-particles-js';\nimport FaceRecognition from './components/FaceRecognition/FaceRecognition';\n\n\n\n\nconst particlesOptions = {\n    particles: {\n     number :30,\n     density: {\n       enable: true,\n       value_area: 800\n     }\n    }\n  }\n\n  \n\n\n   const initialState = {\n      input: '',\n      imageUrl: '',\n      box: {},\n      route: 'signin',\n      isSignedIn: false,\n      user: {\n        email: '',\n        name: '',\n        id: '',\n        entries: 0,\n        joined : ''\n      }\n   }\n   class App extends Component {\n    \n   constructor() {\n     super();\n     this.state = initialState;\n     \n     } \n   \n  loadUser = (data) => {\n    this.setState({user: {\n      email: data.email,\n      name: data.name,\n      id: data.id,\n      entries: data.entries,\n      joined : data.joined \n      \n    }});\n  } \n   \n   calculateFaceLocation= (data) => {\n      const clarifaiFace = data.outputs[0].data.regions[0].region_info.bounding_box;\n      const image= document.getElementById('inputimage');\n      const width= Number(image.width);\n      const height= Number(image.height);\n      console.log(width,height);\n      return {\n          leftCol: clarifaiFace.left_col * width,\n          topRow: clarifaiFace.top_row * height,\n          rightCol: width - (clarifaiFace.right_col*width),\n          bottomRow: height - (clarifaiFace.bottom_row * height)\n\n      }\n   }\n\n   displayFaceBox = (box) => {\n     this.setState({box: box});\n   }\n\n   onInputChange =(event)=> {\n     this.setState({input: event.target.value});\n   }\n   onButtonSubmit = () => {\n    this.setState({imageUrl: this.state.input});\n    fetch('http://localhost:3000/imageurl', {\n           method: 'post',\n           headers: { 'Content-Type': 'application/json' } ,\n          body: JSON.stringify({\n        input: this.state.input\n         })\n        })\n        .then(response => response.json())\n       .then(response => {\n       if (response) {\n         fetch('http://localhost:3000/image', {\n           method: 'put',\n           headers: { 'Content-Type': 'application/json' } ,\n          body: JSON.stringify({\n        id: this.state.user.id\n         })\n        })\n        .then(response => response.json())\n        .then(count => {\n          this.setState(Object.assign(this.state.user, {entries: count}))\n        })\n        .catch(console.log)\n      }\n         \n         this.displayFaceBox(this.calculateFaceLocation(response))\n      } )\n         .catch(err=>console.log(err));\n      }\n\n      onRouteChange = (route) => {\n        if (route === 'signout') {\n          this.setState(initialState)\n        } else if (route === 'home') {\n          this.setState({isSignedIn: true});\n        }\n                this.setState({route: route});\n      }\n\n  render() {\n    const {isSignedIn, route, box, imageUrl} = this.state;\n    return (\n    <div className=\"App\">\n       <Particles className='particles'\n              params={particlesOptions}\n        />\n      <Navigation isSignedIn={isSignedIn} onRouteChange={this.onRouteChange}/>\n      {route === 'home'\n          ?<div>\n          <Logo />\n         <Rank name={this.state.user.name} entries={this.state.user.entries}/>\n         <ImageLinkForm \n     onInputChange={this.onInputChange } \n     onButtonSubmit={this.onButtonSubmit}/>\n         <FaceRecognition box={box} imageUrl= {imageUrl}/>\n         </div>\n         : (\n           route === 'signin'\n             ? <Signin loadUser = {this.loadUser} onRouteChange ={this.onRouteChange}/>\n           : <Register loadUser = {this.loadUser} onRouteChange ={this.onRouteChange} />\n           )\n          \n      }\n   </div>\n  );\n}\n}\n\nexport default App;\n"]},"metadata":{},"sourceType":"module"}